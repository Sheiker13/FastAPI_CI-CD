
# üöÄ FastAPI CI/CD Monitoring Project

–ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç FastAPI —Å:

- ‚úÖ CI/CD —á–µ—Ä–µ–∑ GitHub Actions
- üê≥ Docker + Docker Compose
- üî• Prometheus + Grafana –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- üìä –ú–µ—Ç—Ä–∏–∫–∏ `/metrics` —Å Prometheus Client
- üì¨ Telegram-–æ–ø–æ–≤–µ—â–µ–Ω–∏—è –∏–∑ Grafana
- üß™ Pytest + Coverage + Flake8
- üì¶ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (–ø–æ SSH)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py           # FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ logger.py         # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ metrics.py        # –ü—Ä–æ–º–µ—Ç–µ–π-–º–µ—Ç—Ä–∏–∫–∏
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ test_main.py      # Pytest —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ prometheus.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone https://github.com/your-username/fastapi-ci-cd.git
cd fastapi-ci-cd
docker-compose up --build
```

---

## üåç Endpoints

| –ú–µ—Ç–æ–¥ | URL            | –û–ø–∏—Å–∞–Ω–∏–µ                      |
|-------|----------------|-------------------------------|
| GET   | `/`            | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞              |
| GET   | `/health`      | Health check (–¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞) |
| GET   | `/metrics`     | –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è Prometheus        |

---

## üîß CI/CD Pipeline

–ù–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.github/workflows/ci-cd.yml`:

- –ü—Ä–∏ –ø—É—à–µ –≤ `main`:
  - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (`flake8`)
  - ‚úÖ –ü—Ä–æ–≥–æ–Ω —Ç–µ—Å—Ç–æ–≤ (`pytest`)
  - ‚úÖ Coverage-–æ—Ç—á–µ—Ç
  - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ SSH

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å `/metrics`
- Grafana –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏:
  - üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ (`request_count_total`)
  - ‚è± –ó–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ (`request_latency_seconds`)
- –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `app/metrics.py`

### üîî Telegram Alert (Grafana)

- –ü—Ä–∏ –∑–∞–¥–µ—Ä–∂–∫–µ > 2 —Å–µ–∫ –≤ —Ç–µ—á–µ–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–µ–≤–æ–≥–∞
- Grafana –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram —á–µ—Ä–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞:
  - BotFather ‚Üí —Ç–æ–∫–µ–Ω
  - /getUpdates ‚Üí chat_id
  - –í Grafana ‚Üí Alerting ‚Üí Contact points

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
pytest --cov=app tests/
flake8 app
```

---

## üõ† –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### üß© –ü—Ä–æ–±–ª–µ–º–∞: Telegram –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –û—à–∏–±–∫–∞: `400 Bad Request` –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ç—Ä–µ–≤–æ–≥–∏ –∏–∑ Grafana
- –†–µ—à–µ–Ω–∏–µ:
  - –ù–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω `chat_id`, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –±—ã–ª–æ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç—É
  - –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª—é–±–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram –±–æ—Ç—É `@your_bot` ‚Äî Grafana —É—Å–ø–µ—à–Ω–æ –Ω–∞—á–∞–ª–∞ —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

### üß© –ü—Ä–æ–±–ª–µ–º–∞: Grafana –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –º–µ—Ç—Ä–∏–∫–∏
- –û—à–∏–±–∫–∞: `404 /metrics`
- –ü—Ä–∏—á–∏–Ω–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª —ç–Ω–¥–ø–æ–∏–Ω—Ç `/metrics` –≤ FastAPI
- –†–µ—à–µ–Ω–∏–µ:
  - –î–æ–±–∞–≤–ª–µ–Ω `prometheus_client` –∏ `app.add_route("/metrics", metrics_app)`

---

### üß© –ü—Ä–æ–±–ª–µ–º–∞: CI/CD –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è
- –ü—Ä–∏—á–∏–Ω–∞: –Ω–µ –±—ã–ª–æ `.github/workflows/ci-cd.yml`
- –†–µ—à–µ–Ω–∏–µ:
  - –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–±–æ—á–∏–π CI/CD —Å–∫—Ä–∏–ø—Ç —Å —ç—Ç–∞–ø–∞–º–∏: `flake8`, `pytest`, `coverage`, `deploy via SSH`

---

### üìò –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (FastAPI + Docker)
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–µ—Ç—Ä–∏–∫
3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Prometheus + Grafana
5. –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ –∏ —Ç—Ä–µ–≤–æ–≥
6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD —á–µ—Ä–µ–∑ GitHub Actions
7. –§–∏–Ω–∞–ª—å–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

---


